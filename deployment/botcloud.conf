<VirtualHost *:80>
    ServerName botcloud.local
    ServerAlias botcloud

    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8000/
    ProxyPassReverse / http://127.0.0.1:8000/

    # WebSocket support
    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*)           ws://127.0.0.1:8001/$1 [P,L]
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /(.*)           http://127.0.0.1:8000/$1 [P,L]

    ErrorLog ${APACHE_LOG_DIR}/botcloud_error.log
    CustomLog ${APACHE_LOG_DIR}/botcloud_access.log combined
</VirtualHost>
